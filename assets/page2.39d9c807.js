import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";import{q as V,h as f,i as w,x,r as d,o as C,j as k,d as u,e as l,w as t,F as E,y as A,E as D,z as y,f as p}from"./index.eb8f4e47.js";const I={name:"page1",setup(){const{proxy:n}=V(),o=f([]),h=async()=>{o.value=await n.$api.getArticleData()};w(()=>{h()});const e=f(!1),b=s=>{A.confirm("\u786E\u5B9A\u5173\u95ED?").then(()=>{n.$refs.fileForm.resetFields(),s()}).catch(()=>{})},r=x({title:"",url:"",html:"",ID:""}),c=async()=>{const s=f({});n.$refs.fileForm.validate(async v=>{if(v){if(i.value==="add"?(r.ID=n.$api.randomString(9),s.value=await n.$api.addArticle(r)):s.value=await n.$api.editArticle(r),console.log(s),s.value.msg==="success"){const a=r.title;e.value=!1,n.$refs.fileForm.resetFields(),await h(),D({title:i.value==="add"?"\u63D0\u4EA4\u6210\u529F":"\u66F4\u65B0\u6210\u529F",message:`${a}\u4E0A\u4F20\u6210\u529F`,duration:2e3})}}else y({showClose:!0,message:"\u8BF7\u6309\u7167\u8981\u6C42\u4E66\u5199",type:"error"})})},m=s=>{i.value="edit",e.value=!0,n.$nextTick(()=>{Object.assign(r,s)})},g=()=>{i.value="add",e.value=!0},_=()=>{y({showClose:!0,message:"\u8BF7\u8054\u7CFB\u8D85\u7EA7\u7BA1\u7406\u5458\u5220\u9664",type:"error"})},i=f("add");return{FileList:o,dialogVisible:e,handleClose:b,formFile:r,submit:c,handleEdit:m,handleAdd:g,action:i,handleDelete:_}}},q={class:"file-header"},B=p("\u65B0\u589E"),N={class:"table"},U={style:{height:"550px",overflow:"scroll",width:"100%"}},z=p(" \u7F16\u8F91 "),L=p(" \u5220\u9664 "),M=["src"],j={style:{width:"100%","text-align":"right"}},O=p("\u63D0\u4EA4");function T(n,o,h,e,b,r){const c=d("el-button"),m=d("el-table-column"),g=d("el-table"),_=d("el-input"),i=d("el-form-item"),s=d("el-form"),v=d("el-dialog");return C(),k(E,null,[u("div",q,[l(c,{type:"primary",onClick:e.handleAdd},{default:t(()=>[B]),_:1},8,["onClick"])]),u("div",N,[u("div",U,[l(g,{data:e.FileList,style:{width:"100%"}},{default:t(()=>[l(m,{prop:"articleId",label:"\u6587\u7AE0ID"}),l(m,{prop:"title",label:"\u6587\u7AE0\u540D\u79F0"}),l(m,{fixed:"right",label:"Operations",width:"120"},{default:t(a=>[l(c,{link:"",type:"primary",size:"small",onClick:S=>e.handleEdit(a.row)},{default:t(()=>[z]),_:2},1032,["onClick"]),l(c,{link:"",type:"danger",size:"small",onClick:e.handleDelete},{default:t(()=>[L]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),l(v,{modelValue:e.dialogVisible,"onUpdate:modelValue":o[3]||(o[3]=a=>e.dialogVisible=a),title:e.action==="add"?"\u6DFB\u52A0\u6587\u7AE0":"\u7F16\u8F91\u6587\u7AE0",width:"80%","before-close":e.handleClose},{default:t(()=>[l(s,{inline:!1,model:e.formFile,ref:"fileForm"},{default:t(()=>[l(i,{label:"\u6587\u7AE0\u540D\u79F0",prop:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u7AE0\u540D\u79F0"}]},{default:t(()=>[l(_,{modelValue:e.formFile.title,"onUpdate:modelValue":o[0]||(o[0]=a=>e.formFile.title=a),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(i,{label:"\u5C01\u9762\u56FE\u7247\u5730\u5740",prop:"url",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5C01\u9762\u56FE\u7247\u5730\u5740"}]},{default:t(()=>[l(_,{modelValue:e.formFile.url,"onUpdate:modelValue":o[1]||(o[1]=a=>e.formFile.url=a),placeholder:"\u8BF7\u7C98\u8D34\u5C01\u9762\u56FE\u7247\u5730\u5740"},null,8,["modelValue"]),u("img",{src:e.formFile.url,alt:"",style:{width:"80%","margin-top":"20px"}},null,8,M)]),_:1}),l(i,{label:"\u6B63\u6587\u5185\u5BB9",prop:"html",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6B63\u6587\u5185\u5BB9"}]},{default:t(()=>[l(_,{modelValue:e.formFile.html,"onUpdate:modelValue":o[2]||(o[2]=a=>e.formFile.html=a),rows:5,type:"textarea",placeholder:"\u8BF7\u7C98\u8D34\u6B63\u6587\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),l(i,null,{default:t(()=>[u("div",j,[l(c,{type:"primary",onClick:e.submit},{default:t(()=>[O]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])],64)}const J=F(I,[["render",T],["__scopeId","data-v-4336c7a5"]]);export{J as default};
